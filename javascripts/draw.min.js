(function(){var i,b,g,d,h,j,e,c,f,k,a;this.r=16;i=Math.PI*2;d="rgba(0,0,0, 0.8)";j="#0090ff";f=d;h=d;e=d;c="#da5d00";this.draw_state=function(m,l,n){m.beginPath();
m.arc(l,n,r,0,i,true);m.fill();m.stroke();return null;};k=function(m,l,n){m.save();m.fillStyle="rgba(0,0,255,0.2)";m.beginPath();m.arc(l,n,r,0,i,true);
m.fill();m.stroke();m.beginPath();m.arc(l,n,r+4,0,i,true);m.stroke();m.restore();return null;};this.draw_edge=function(A,o,y,m,x,v){var t,C,z,s,q,p,n,l,B,w,u;
if(v==null){v=false;}C=m-o;z=x-y;t=Math.sqrt(C*C+z*z);if(t===0){return;}s=C/t;q=z/t;p=q;n=-s;o=o+r*s;y=y+r*q;if(v===false){m=m-r*s;x=x-r*q;}l=m-(10*s)+(4*p);
w=x-(10*q)+(4*n);B=l-(8*p);u=w-(8*n);A.save();A.fillStyle=h;A.strokeStyle=h;A.beginPath();A.moveTo(o,y);A.lineTo(m,x);A.stroke();A.beginPath();A.lineTo(l,w);
A.lineTo(B,u);A.lineTo(m,x);A.stroke();A.fill();A.restore();return null;};this.draw_cured_edge=function(w,B,p,A,n,C){var q,o,y,v,u,E,D,t,s,z,x,m,l;if(C==null){C=false;
}v=A-B;u=n-p;y=Math.sqrt(v*v+u*u);if(y===0){return;}E=v/y;D=u/y;t=D;s=-E;q=(B+A)/2+t*y/6;o=(p+n)/2+s*y/6;v=q-B;u=o-p;y=Math.sqrt(v*v+u*u);E=v/y;D=u/y;B=B+r*E;
p=p+r*D;if(C===false){v=A-q;u=n-o;E=v/y;D=u/y;t=D;s=-E;A=A-r*E;n=n-r*D;}z=A-(10*E)+(4*t);m=n-(10*D)+(4*s);x=z-(8*t);l=m-(8*s);w.save();w.fillStyle=h;w.strokeStyle=h;
w.beginPath();w.moveTo(B,p);w.quadraticCurveTo(q,o,A,n);w.stroke();w.beginPath();w.lineTo(z,m);w.lineTo(x,l);w.lineTo(A,n);w.stroke();w.fill();w.restore();
return null;};b=Math.PI/3;g=Math.PI/12;a={dx1:r*Math.cos(b),dy1:r*Math.sin(b),dx2:r*4*Math.cos(b),dy2:r*4*Math.sin(b),dx3:r*4*Math.cos(g),dy3:r*4*Math.sin(g),dx4:r*Math.cos(g),dy4:r*Math.sin(g),nx:Math.cos(b-Math.PI/24),ny:Math.sin(b-Math.PI/24)};
this.draw_loop=function(w,v,u){var B,I,H,t,s,F,E,D,C,A,z,q,p,o,n,m,l;I=-a.nx;H=a.ny;t=H;s=-I;F=v+a.dx1;q=u-a.dy1;B=4*r;E=v+a.dx2;p=u-a.dy2;D=v+a.dx3;o=u-a.dy3;
C=v+a.dx4;n=u-a.dy4;A=F-(10*I)+(4*t);m=q-(10*H)+(4*s);z=A-(8*t);l=m-(8*s);w.save();w.fillStyle=h;w.strokeStyle=h;w.beginPath();w.moveTo(F,q);w.bezierCurveTo(E,p,D,o,C,n);
w.stroke();w.beginPath();w.moveTo(F,q);w.lineTo(A,m);w.lineTo(z,l);w.lineTo(F,q);w.stroke();w.fill();w.restore();return null;};this.draw_graph=function(D,C){var E,q,n,B,A,z,w,m,l,t,v,s,o,u,p;
D.save();D.textAlign="center";D.strokeStyle=e;E=12/2;p=C.nodes.x;for(q=o=0,u=p.length;o<u;q=++o){w=p[q];t=C.nodes.y[q];D.fillStyle=j;draw_state(D,w,t);
B=q.toString();D.fillStyle=f;D.fillText(B,w,t+E);}n=C.edges.length;while(--n>=0){A=C.edges.a[n];z=C.edges.b[n];m=C.nodes.x[A];v=C.nodes.y[A];l=C.nodes.x[z];
s=C.nodes.y[z];if(A!==z){if(C.edges.curved[n]){draw_cured_edge(D,m,v,l,s);}else{draw_edge(D,m,v,l,s);}}else{draw_loop(D,m,v);}}D.restore();return null;
};this.draw_selected=function(w,v,o){var z,l,u,t,q,n,s,p,m;w.save();w.textAlign="center";w.fillStyle="rgba(0,0,255,0.2)";z=12/2;p=o.nodes;for(n=0,s=p.length;
n<s;n++){l=p[n];m=unpack(v.nodes[l]),t=m[0],q=m[1];draw_state(w,t,q);u=l.toString();w.fillText(u,t,q+z);}w.restore();return null;};this.draw_new=function(n,t,s){var p,m,o,q,l;
n.save();n.textAlign="center";n.strokeStyle=e;for(m=q=0,l=t.length;q<l;m=++q){p=t[m];o=s[m];n.beginPath();n.moveTo(G.nodes.x[p],y1);n.lineTo(x5,y5);n.stroke();
}n.restore();return null;};}).call(this);