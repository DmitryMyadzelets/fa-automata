(function(){var e,g,h,i,c,a,b,f,d;g=function(j,k){graph.nodes.x.push(j);return graph.nodes.y.push(k)-1;};b=function(j,l,k){if(k<graph.nodes.x.length){graph.nodes.x.push(graph.nodes.x[k]);
graph.nodes.y.push(graph.nodes.y[k]);}graph.nodes.x[k]=j;graph.nodes.y[k]=l;return k;};i=function(k){var j,l;l=null;if((k<(j=graph.nodes.x.length))&&(k>-1)){if(k===j-1){l=[graph.nodes.x.pop(),graph.nodes.y.pop()];
}else{l=[graph.nodes.x[k],graph.nodes.y[k]];graph.nodes.x[k]=graph.nodes.x.pop();graph.nodes.y[k]=graph.nodes.y.pop();}}return l;};this.move_node=function(k,j,l){graph.nodes.x[k]=j;
graph.nodes.y[k]=l;return null;};e=function(k,j){var m,l;m=c(j,k);l=graph.edges.push(pack(k,j))-1;if((graph.curved[l]=m>=0)){graph.curved[m]=true;}return l;
};a=function(l,j,k){var m;m=c(j,l);if(k<graph.edges.length){graph.edges.push(graph.edges[k]);graph.curved.push(graph.curved[k]);}graph.edges[k]=pack(l,j);
if(m<0){graph.curved[k]=false;}else{if(m===k){m=graph.edges.length-1;}graph.curved[k]=graph.curved[m]=true;}return k;};h=function(m){var l,k,o,j,n,p;n=null;
if((m<(j=graph.edges.length))&&(m>-1)){p=unpack(graph.edges[m]),l=p[0],k=p[1];if(m===j-1){n=graph.edges.pop();graph.curved.pop();}else{n=graph.edges[m];
graph.edges[m]=graph.edges.pop();graph.curved[m]=graph.curved.pop();}if((o=c(k,l))>=0){graph.curved[o]=false;}}return n;};c=function(j,n){var o,m,l,q,k,p;
l=pack(j,n);p=graph.edges;for(m=q=0,k=p.length;q<k;m=++q){o=p[m];if(o===l){return m;}}return -1;};d=function(j,k){graph.edges[j]=k;return null;};f=function(m,l){var n,j,p,k,o;
o=graph.nodes.x;for(n=p=0,k=o.length;p<k;n=++p){j=o[n];graph.nodes.x[n]+=m;graph.nodes.y[n]+=l;}return null;};this.ged={commands:new Undo(),reset:Undo.prototype.reset,undo:Undo.prototype.undo,redo:Undo.prototype.redo,edges:{add:function(n,k,j,m){var l;
l=faxy.edges.add(n,k,j,m);if(l>=0){ged.commands.put(faxy.edges.add,arguments,faxy.edges.del,[n,m]);}return l;},del:function(n,m){var k,j,l;k=n.edges.a[m];
j=n.edges.b[m];l=faxy.edges.del(n,m);if(l>=0){ged.commands.put(faxy.edges.del,arguments,faxy.edges.add,[n,k,j,m]);}return l;},get:faxy.edges.get,set:faxy.edges.set,out:faxy.edges.out,has:faxy.edges.has},nodes:{add:function(l,j,m){var k;
k=faxy.nodes.add(l);console.log("ix",k,l.nodes);l.nodes.x[k]=j;l.nodes.y[k]=m;ged.commands.put(faxy.nodes.add,arguments,faxy.nodes.del,[l,k]);return k;
},del:function(l,k){var j;ged.commands.start_transaction();j=faxy.nodes.del(l,k,function(n,m){return ged.edges.del(n,m);});if(j>=0){ged.commands.put(faxy.nodes.del,arguments,faxy.nodes.add,arguments);
}ged.commands.stop_transaction();return j;},get:faxy.nodes.get,set:faxy.nodes.set,out:faxy.nodes.out,"in":faxy.nodes["in"]}};this.editor=this.ged;}).call(this);
